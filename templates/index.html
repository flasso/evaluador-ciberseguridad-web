<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Formulario de Evaluación</title>
  <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
  <style>
    img.logo {
      max-width: 180px;
      margin-bottom: 1rem;
    }
    .segmento {
      margin-bottom: 2rem;
    }
    label {
      display: block;
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
    <h1>Evaluador de Ciberseguridad</h1>
    <p>Por favor complete la siguiente información antes de comenzar la evaluación:</p>
  </header>

  <form method="POST">
    <fieldset>
      <legend>Datos generales</legend>
      <label>Empresa: <input type="text" name="empresa" required></label>
      <label>Correo: <input type="email" name="correo" required></label>
      <label>Sector:
        <select name="sector" required>
          <option value="">Seleccione...</option>
          <option>Financiero</option>
          <option>Salud</option>
          <option>Educación</option>
          <option>Industrial</option>
          <option>Comercio</option>
          <option>Servicios</option>
          <option>Otro</option>
        </select>
      </label>
      <label>Número de PCs:
        <select name="pcs" required>
          <option value="">Seleccione...</option>
          <option>1 a 50</option>
          <option>51 a 150</option>
          <option>151 a 250</option>
          <option>Más de 250</option>
        </select>
      </label>
      <label>¿Tienen sucursales?
        <select name="sucursales" required>
          <option value="">Seleccione...</option>
          <option>Sí</option>
          <option>No</option>
        </select>
      </label>
      <label>Modelo de trabajo:
        <select name="modelo" required>
          <option value="">Seleccione...</option>
          <option>Presencial</option>
          <option>Remoto</option>
          <option>Híbrido</option>
        </select>
      </label>
      <label>¿Qué tipo de servidores utiliza?
        <select name="servidores" required>
          <option value="">Seleccione...</option>
          <option>Propios</option>
          <option>Arrendados</option>
          <option>Ambos</option>
          <option>No tiene</option>
        </select>
      </label>
    </fieldset>

    <hr>

    {# El `pregunta_idx` se usa para acceder a las opciones correctas en la lista `opciones` #}
    {% set pregunta_idx = 0 %}
    {% for segmento, preguntas_del_segmento in segmentos %} {# Renombrado para claridad #}
      <section class="segmento">
        <h2>{{ segmento }}</h2>
        {# AQUI ES EL CAMBIO: 'preguntas_del_segmento' solo contiene las cadenas de texto de las preguntas #}
        {% for pregunta in preguntas_del_segmento %} 
          <fieldset>
            <legend>{{ pregunta }}</legend>
            {% for opcion in opciones[pregunta_idx] %}
              <label>
                <input type="radio" name="{{ pregunta }}" value="{{ opcion }}" required> {{ opcion }}
              </label>
            {% endfor %}
          </fieldset>
          {% set pregunta_idx = pregunta_idx + 1 %}
        {% endfor %}
      </section>
    {% endfor %}

    <button type="submit">Enviar evaluación</button>
  </form>
</body>
</html>